Модуль API «Гостиницы» и «Бронирование»
2.1. Модуль «Гостиницы» в NestJS
2.1.1. Поиск номеров
Адрес: GET /api/common/hotel-rooms
Query-параметры:

limit: количество записей в ответе
offset: сдвиг от начала списка
hotel: ID гостиницы для фильтрации номеров по отелю

[
  {
    "id": "номер_1",
    "description": "Описание номера",
    "images": ["ссылка на картинку"],
    "hotel": {
      "id": "ID гостиницы",
      "title": "Название гостиницы"
    }
  }
]
Доступ: Доступно всем пользователям. Если пользователь не аутентифицирован или роль client, то применяется фильтр isEnabled: true.

2.1.2. Информация о номере
Адрес: GET /api/common/hotel-rooms/:id

{
  "id": "номер_1",
  "description": "Описание номера",
  "images": ["ссылка на картинку"],
  "hotel": {
    "id": "ID гостиницы",
    "title": "Название гостиницы",
    "description": "Описание гостиницы"
  }
}
Доступ: Доступно всем пользователям.

2.1.3. Добавление гостиницы
Адрес: POST /api/admin/hotels/

Тело запроса:

{
  "title": "Название гостиницы",
  "description": "Описание гостиницы"
}

{
  "id": "hotel_1",
  "title": "Название гостиницы",
  "description": "Описание гостиницы"
}
Доступ: Доступно только пользователям с ролью admin. Ошибки: 401, 403.

2.1.4. Получение списка гостиниц
Адрес: GET /api/admin/hotels/
Query-параметры:

limit: количество записей
offset: сдвиг от начала списка
title: фильтр по названию гостиницы

{
  "id": "hotel_1",
  "title": "Название гостиницы",
  "description": "Описание гостиницы"
}
Доступ: Только для администраторов. Ошибки: 401, 403.

2.1.5. Изменение описания гостиницы
Адрес: PUT /api/admin/hotels/:id

Тело запроса:

{
  "title": "Новое название",
  "description": "Новое описание"
}

{
  "id": "hotel_1",
  "title": "Новое название",
  "description": "Новое описание"
}
Доступ: Доступно только пользователям с ролью admin. Ошибки: 401, 403.

2.1.6. Добавление номера
Адрес: POST /api/admin/hotel-rooms/

Тело запроса: Формат multipart/form-data.
Параметры:

description: Описание номера
hotelId: ID гостиницы
images[]: Файлы изображений номеров

{
  "id": "room_1",
  "description": "Описание номера",
  "images": ["ссылки на картинки"],
  "isEnabled": true,
  "hotel": {
    "id": "hotel_1",
    "title": "Название гостиницы",
    "description": "Описание гостиницы"
  }
}
Доступ: Только для администраторов. Ошибки: 401, 403.

2.1.7. Изменение описания номера
Адрес: PUT /api/admin/hotel-rooms/:id

Тело запроса: Формат multipart/form-data.
Параметры:

description: Описание номера
hotelId: ID гостиницы
isEnabled: Флаг доступности номера
images[]: Файлы изображений
Ответ:

{
  "id": "room_1",
  "description": "Новое описание номера",
  "images": ["ссылки на картинки"],
  "isEnabled": true,
  "hotel": {
    "id": "hotel_1",
    "title": "Название гостиницы",
    "description": "Описание гостиницы"
  }
}
Доступ: Только для администраторов. Ошибки: 401, 403.

2.2. Модуль «Бронирование»
2.2.1. Бронирование номера
Адрес: POST /api/client/reservations

Тело запроса:

{
  "hotelRoom": "room_1",
  "startDate": "2024-09-22",
  "endDate": "2024-09-25"
}

{
  "startDate": "2024-09-22",
  "endDate": "2024-09-25",
  "hotelRoom": {
    "description": "Описание номера",
    "images": ["ссылки на картинки"]
  },
  "hotel": {
    "title": "Название гостиницы",
    "description": "Описание гостиницы"
  }
}
Доступ: Только для пользователей с ролью client. Ошибки: 401, 403, 400.

2.2.2. Список броней текущего пользователя
Адрес: GET /api/client/reservations

[
  {
    "startDate": "2024-09-22",
    "endDate": "2024-09-25",
    "hotelRoom": {
      "description": "Описание номера",
      "images": ["ссылки на картинки"]
    },
    "hotel": {
      "title": "Название гостиницы",
      "description": "Описание гостиницы"
    }
  }
]
Доступ: Только для клиентов. Ошибки: 401, 403.

2.2.3. Отмена бронирования
Адрес: DELETE /api/client/reservations/:id

Доступ: Только для клиентов. Ошибки: 401, 403, 400.

2.2.4. Список броней конкретного пользователя
Адрес: GET /api/manager/reservations/:userId

[
  {
    "startDate": "2024-09-22",
    "endDate": "2024-09-25",
    "hotelRoom": {
      "description": "Описание номера",
      "images": ["ссылки на картинки"]
    },
    "hotel": {
      "title": "Название гостиницы",
      "description": "Описание гостиницы"
    }
  }
]